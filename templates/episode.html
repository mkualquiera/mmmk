<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">

        <link rel="apple-touch-icon" sizes="57x57" href="/static/apple-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="/static/apple-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="/static/apple-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="/static/apple-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="/static/apple-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="/static/apple-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="/static/apple-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="/static/apple-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="/static/apple-icon-180x180.png">
        <link rel="icon" type="image/png" sizes="192x192"  href="/static/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="/static/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon-16x16.png">
        <link rel="manifest" href="/static/manifest.json">
        <meta name="msapplication-TileColor" content="#232323">
        <meta name="msapplication-TileImage" content="/static/ms-icon-144x144.png">
        <meta name="theme-color" content="#2fbc8d">

        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">


        <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js"
            type="application/javascript"></script>
        <link rel="icon" href="../../favicon.ico">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet"> 
        <link href="/static/style.css" rel="stylesheet">

        <title>mmmk: {{ episode_data["title"] }}</title>
        <meta name="description" content="{{ episode_data['description']}}">
        <meta name="author" content="mkualquiera">
        <meta property="og:title" content="{{ episode_data['title']}}">
        <meta property="og:type" content="article">
        <meta property="og:url" content="http://mmmk.huestudios.xyz/episode/{{ episode_data['number']}}">
        <meta property="og:site_name" content="mmmk">
        <meta property="og:image" content="http://mmmk.huestudios.xyz/files/images/{{episode_data['number']}}/{{episode_data['featured_image']}}">
        <!-- Make image big -->
        <meta property="og:image:width" content="1200">
        <meta property="og:description" content="{{ episode_data['description']}}">
        <meta property="twitter:card" content="summary_large_image">
        <!-- Show big image -->
        <meta property="twitter:image" content="http://mmmk.huestudios.xyz/files/images/{{episode_data['number']}}/{{episode_data['featured_image']}}">
    </head>
    <body>
        <h1>
            <a href="/">mmmk</a>
        </h1>
        <div>
            <a href="/first">|<</a>
            <a href="{{episode_data['number']}}/prev"><</a>
            <a href="/random">random</a>
            <a href="{{episode_data['number']}}/next">></a>
            <a href="/last">>|</a>
        </div>
        <h2> 
            {{ episode_data["title"] }}
        </h2>
        <p>
            {{ episode_data["description"] }}
        </p>
        <div>
            {% for image in episode_images %}
                <img src="/files/images/{{episode_data['number']}}/{{image}}"/>
                <br>
            {% endfor %}
        </div>
        <p>
            Written on {{ episode_data["when_written"] }}
        </p>
        <div>
            <a href="/first">|<</a>
            <a href="{{episode_data['number']}}/prev"><</a>
            <a href="/random">random</a>
            <a href="{{episode_data['number']}}/next">></a>
            <a href="/last">>|</a>
        </div>
        <h3>Comments</h3>
        <div>
            <div>
                <textarea id="comment" rows="4" cols="50"></textarea>
                <button type="button" id="anonymous_comment" 
                    onclick="comment()">
                    Post comment
                </button>
            </div>
            {% if episode_comments|length %}
                {% for comment in episode_comments %}
                <div class="comment">
                    <h4>
                        {{ comment["nickname"] + "#" + comment["address"][0:7] }} ({{ comment["time_str"] }})
                    </h4>
                    {{ comment["text"] }} <br>
                    <div class="signature">
                        {{ comment["_id"] }} <br>
                        {{ comment["signed"]}} <br>
                        {{ comment["signature"] }}
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p>
                    No comments yet.
                </p>
            {% endif %}
        </div>
    <script src="/static/episode.js"></script>
    </body>
</html>